<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹„ë””ì˜¤ ì—…ë¡œë“œ</title>
    <style>
       
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ¬ ë¹„ë””ì˜¤ ì—…ë¡œë“œ</h2>
        
        <a th:href="@{/}" class="nav-link">ë©”ì¸</a>
        
        <!-- ì—…ë¡œë“œ ë©”ì‹œì§€ -->
        <div th:if="${msg != null}" th:text="${msg}" class="success-message"></div>

        <!-- ì—…ë¡œë“œ í¼ -->
        <form id="videoUploadForm" enctype="multipart/form-data">
            
            <div class="form-group">
                <label for="title">ì œëª©:</label>
                <input type="text" id="title" name="title" required placeholder="ë¹„ë””ì˜¤ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            
            <div class="form-group">
                <label for="description">ì„¤ëª…:</label>
                <textarea id="description" name="description" placeholder="ë¹„ë””ì˜¤ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)"></textarea>
            </div>
            
            <div class="form-group">
                <label>ë¹„ë””ì˜¤ íŒŒì¼ ì„ íƒ:</label>
                <div class="file-input-wrapper">
                    <input type="file" id="upfile" name="upfile" accept="video/*" multiple="multiple" required>
                    <label for="upfile" class="file-input-label video-label">ë¹„ë””ì˜¤ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”</label>
                </div>
            </div>
            
<!--             <div class="form-group"> -->
<!--                 <label>ì¸ë„¤ì¼ ì„ íƒ:</label> -->
<!--                 <div class="file-input-wrapper"> -->
<!--                     <input type="file" id="upViewfile" name="upViewfile" multiple="multiple" required> -->
<!--                     <label for="upViewfile" class="file-input-label thumbnail-label">ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”</label> -->
<!--                 </div> -->
<!--             </div> -->
			<input type="hidden" name="courseSeq" th:value="${courseSeq}"/>
            <button type="submit" class="submit-btn">ì—…ë¡œë“œ</button>
        </form>
    </div>

    <script>
  
      
        
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
	 $('#videoUploadForm').on('submit', function(e){
     	e.preventDefault();
     	
     	const formData = new FormData(this);
     	
     	$.ajax({
     		url:'/upload/upload_video',
     		type:'POST',
     		data:formData,
     		processData: false,
     	    contentType: false,
     	    success: function(res){
     	    	if(res.status === 'success'){
     	    		const courseSeq = res.cDTO.courseSeq;
     	    		alert(res.msg);
     	    		window.location.href = '/upload/upload_course?seq='+courseSeq;
     	    	}else{
     	    		alert(res.msg);
     	    	}
     	    },
     	    error: function(xhr, status, err){
     	    	console.error(xhr.responseText);
     	    	alert("ì—ëŸ¬ ë°œìƒ : "+ err);
     	    }
     		
     	});//ajax
     	
     });//ajaxscript
	</script>
</body>
</html>