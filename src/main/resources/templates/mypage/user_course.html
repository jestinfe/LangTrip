<!-- templates/mypage/user_courses.html -->
<div th:fragment="content">

  <style>
    .course-card {
      width: 300px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      background: #fff;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s;
      margin-bottom: 20px;
    }

    .course-card:hover {
      transform: translateY(-5px);
    }

    .card-thumbnail {
      position: relative;
      width: 100%;
      height: 180px;
      overflow: hidden;
    }

    .card-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .card-content {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      flex: 1;
    }
  </style>

  <!-- í—¤ë” -->
  <div class="header-section">
    <h1 class="main-title">ë‚´ ê°•ì˜ì‹¤ / ìˆ˜ê°•í•œ ê°•ì˜</h1>
    <p class="subtitle">ìˆ˜ê°• ì¤‘ì¸ ê°•ì˜ë“¤ì„ í™•ì¸í•˜ê³  í•™ìŠµì„ ì´ì–´ê°€ì„¸ìš”</p>
  </div>

  <!-- í•„í„° -->
  <div class="filter-section">
    <div class="filter-row">
      <div class="filter-group">
        <label for="categoryFilter">ì¹´í…Œê³ ë¦¬</label>
        <select id="categoryFilter" class="filter-select" onchange="filtercourses()">
          <option value="">ì „ì²´</option>
          <option value="ì˜ì–´">ì˜ì–´</option>
          <option value="ì¼ë³¸ì–´">ì¼ë³¸ì–´</option>
          <option value="ì¤‘êµ­ì–´">ì¤‘êµ­ì–´</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="difficultyFilter">ë‚œì´ë„</label>
        <select id="difficultyFilter" class="filter-select" onchange="filtercourses()">
          <option value="">ì „ì²´</option>
          <option value="ì´ˆê¸‰">ì´ˆê¸‰</option>
          <option value="ì¤‘ê¸‰">ì¤‘ê¸‰</option>
          <option value="ê³ ê¸‰">ê³ ê¸‰</option>
        </select>
      </div>
      <div class="filter-group search-group">
        <label for="searchInput">ê°•ì˜ëª… ê²€ìƒ‰</label>
        <input type="text" id="searchInput" class="search-input" placeholder="ê°•ì˜ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" oninput="filtercourses()">
      </div>
    </div>
  </div>

  <!-- ë¹ˆ ìƒíƒœ -->
  <div th:if="${#lists.isEmpty(courses)}">
    <div class="empty-state">
      <div class="empty-icon">ğŸ“š</div>
      <div class="empty-title">ìˆ˜ê°• ì¤‘ì¸ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤</div>
      <div class="empty-description">ìƒˆë¡œìš´ ê°•ì˜ë¥¼ ì°¾ì•„ì„œ í•™ìŠµì„ ì‹œì‘í•´ë³´ì„¸ìš”!</div>
    </div>
  </div>

  <!-- ê°•ì˜ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ -->
  <div class="course-grid" th:unless="${#lists.isEmpty(courses)}">
    <div th:each="course : ${courses}" class="course-card">
      <!-- ì¸ë„¤ì¼ -->
      <div class="card-thumbnail">
        <img th:src="${course.thumbnailPath}" alt="ì¸ë„¤ì¼" onerror="this.src='/img/default.png'" />
      </div>

      <!-- ë‚´ìš© -->
      <div class="card-content">
        <div class="card-badges">
          <span class="badge badge-category" th:text="${course.category}"></span>
          <span class="badge badge-difficulty badge-${course.difficulty}" th:text="${course.difficulty}"></span>
        </div>
        <h3 class="card-title" th:text="${course.courseTitle}">ê°•ì˜ ì œëª©</h3>
        <p class="card-description" th:text="${course.introduction}">ê°•ì˜ ì„¤ëª…</p>
        <div class="card-stats">
          <div class="stat-item">
            <span>ğŸ“… ìˆ˜ê°•ì‹œì‘:</span> <span th:text="${course.enrollDate}"></span>
          </div>
          <div class="stat-item">
            <span>ğŸ•’ ìµœê·¼í•™ìŠµ:</span>
          </div>
        </div>
        <div class="card-actions">
          <a th:href="@{/ui/user_registered_course(seq=${course.courseSeq})}" class="btn btn-primary">í•™ìŠµ í•˜ê¸°</a>
        </div>
      </div>
    </div>
  </div>

  <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
  <div class="pagination" th:if="${totalCount > limit}">
    <ul class="pagination-list">
      <li th:if="${page > 1}">
        <a th:href="@{/mypage/user_course(page=${page - 1}, limit=${limit})}">ì´ì „</a>
      </li>
      <li th:each="i : ${#numbers.sequence(1, T(java.lang.Math).ceil(totalCount / (double)limit).intValue())}"
          th:classappend="${i == page} ? 'active'">
        <a th:href="@{/mypage/user_course(page=${i}, limit=${limit})}" th:text="${i}">1</a>
      </li>
      <li th:if="${page * limit < totalCount}">
        <a th:href="@{/mypage/user_course(page=${page + 1}, limit=${limit})}">ë‹¤ìŒ</a>
      </li>
    </ul>
  </div>
