<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>LangTrip | í€´ì¦ˆ í•™ìŠµ ì™„ë£Œ!</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css">
  <link rel="stylesheet" th:href="@{/css/quizCompleted.css}"> 
</head>

<body>
  <div class="complete-container">
    <img th:src="@{/images/quiz/mascot_happy.png}" alt="í€´ì¦ˆ ì™„ë£Œ ë§ˆìŠ¤ì½”íŠ¸">
    <div class="title">í€´ì¦ˆ í•™ìŠµ ì™„ë£Œ!</div>

    <div class="stats">
      <div class="stat-box xp-box">ì´ ë¬¸ì œìˆ˜<br>âš¡ <span th:text="${totalCnt}"></span></div>
      <div class="stat-box accuracy-box">ì •ë‹µë¥ <br>ğŸ¯ <span th:text="${accuracyRate + '%'}"></span></div>
    </div>

    <div class="footer-buttons">
      <button class="btn-fill"
        th:attr="data-course=${qDTO.courseSeq}, data-quizlist=${qDTO.quizListSeq}"
        th:text="${from} == 'modify' ? 'ìˆ˜ì • í™”ë©´ìœ¼ë¡œ ì´ë™' : 'ê°•ì˜ì‹¤ë¡œ ì´ë™'"
        onclick="goToCourse(this)">
      </button>
    </div>
  </div>

  <script>
    function goToCourse(btn) {  
      const from = new URLSearchParams(window.location.search).get('from');

      if (from === 'modify') {
        const quizListSeq = btn.dataset.quizlist;
        if (quizListSeq) {
        location.href = '/quiz/modifyQuizForm/' + quizListSeq + '?courseSeq=' + btn.dataset.course;
        } else {
          alert("âš  ìˆ˜ì •í™”ë©´ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (quizListSeq ì—†ìŒ)");
        }
      } else {
        const courseSeq = btn.dataset.course;
        location.href = '/ui/user_registered_course?seq=' + courseSeq;
      }
    }
  </script>
</body>
</html>
